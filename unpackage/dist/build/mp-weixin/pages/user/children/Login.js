(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/children/Login"],{1498:function(n,e,t){"use strict";var i,o=function(){var n=this,e=n.$createElement;n._self._c},a=[];t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return i}))},"1cbd":function(n,e,t){"use strict";var i=t("c686"),o=t.n(i);o.a},8872:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(t("4795")),o=t("c980");function a(n){return n&&n.__esModule?n:{default:n}}function r(n,e,t,i,o,a,r){try{var u=n[a](r),c=u.value}catch(s){return void t(s)}u.done?e(c):Promise.resolve(c).then(i,o)}function u(n){return function(){var e=this,t=arguments;return new Promise((function(i,o){var a=n.apply(e,t);function u(n){r(a,i,o,u,c,"next",n)}function c(n){r(a,i,o,u,c,"throw",n)}u(void 0)}))}}var c=function(){Promise.all([t.e("common/vendor"),t.e("components/uni-popup/uni-popup")]).then(function(){return resolve(t("f986"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("components/uni-popup/uni-popup-message").then(function(){return resolve(t("7729"))}.bind(null,t)).catch(t.oe)},f=function(){t.e("components/uni-popup/uni-popup-dialog").then(function(){return resolve(t("9ddc"))}.bind(null,t)).catch(t.oe)},d={data:function(){return{username:"",password:"",hint:"",flag:!1,isLoading:!1}},components:{uniPopup:c,uniPopupMessage:s,uniPopupDialog:f},methods:{toSignup:function(){this.$emit("toSignup")},login:function(){var e=this;return u(i.default.mark((function t(){var a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isLoading=!0,""!=e.username){t.next=5;break}e.hint="用户名不能为空",t.next=13;break;case 5:if(""!=e.password){t.next=9;break}e.hint="密码不能为空",t.next=13;break;case 9:return t.next=11,(0,o.sendLogin)(e.username,e.password);case 11:a=t.sent,a.data.isLogin?(e.succeed(a),n.navigateBack()):e.hint="用户名或密码错误";case 13:""!=e.hint&&e.$refs.popupHint.open(),e.isLoading=!1;case 15:case"end":return t.stop()}}),t)})))()},confirm:function(){this.$refs.popupHint.close()},succeed:function(n){this.$store.commit("setLogin",n.data),this.$store.commit("setCart",n.data.cart),this.$store.commit("setSite",n.data.site),this.$store.commit("setAvatar",n.data.avatar)},wxLogin:function(e){var t=this;e.detail.errMsg.includes("ok")&&(this.flag=!this.flag,this.isLoading=!0,n.login({provider:"weixin",success:function(e){var a=e.code;n.getUserInfo({success:function(){var e=u(i.default.mark((function e(r){var u,c;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u={code:a,avatar:r.userInfo.avatarUrl,username:r.userInfo.nickName},e.next=3,(0,o.WXVerifyoLogin)(u);case 3:c=e.sent,t.succeed(c),n.setStorage({key:"cookies",data:c.cookies[0]}),t.isLoading=!1,n.navigateBack();case 8:case"end":return e.stop()}}),e)})));function r(n){return e.apply(this,arguments)}return r}()})}}))}}};e.default=d}).call(this,t("543d")["default"])},c686:function(n,e,t){},da78:function(n,e,t){"use strict";t.r(e);var i=t("1498"),o=t("e53c");for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);t("1cbd");var r,u=t("f0c5"),c=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=c.exports},e53c:function(n,e,t){"use strict";t.r(e);var i=t("8872"),o=t.n(i);for(var a in i)"default"!==a&&function(n){t.d(e,n,(function(){return i[n]}))}(a);e["default"]=o.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/user/children/Login-create-component',
    {
        'pages/user/children/Login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("da78"))
        })
    },
    [['pages/user/children/Login-create-component']]
]);
